<!DOCTYPE html>
<html lang="en" xmlns:c="">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>Dashboard - Ace Admin</title>

    <meta name="description" content="overview &amp; stats" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

    <!-- Bootstrap & FontAwesome -->
    <!-- Stylesheets -->
    <link rel="stylesheet" th:href="@{/admin/assets/css/bootstrap.min.css}" />
    <link rel="stylesheet" th:href="@{/admin/assets/font-awesome/4.2.0/css/font-awesome.min.css}" />

    <!-- Page Specific Plugin Styles -->
    <!-- Text Fonts -->
    <link rel="stylesheet" th:href="@{/admin/assets/fonts/fonts.googleapis.com.css}" />

    <!-- ACE Styles -->
    <link rel="stylesheet" th:href="@{/admin/assets/css/ace.min.css}" class="ace-main-stylesheet" id="main-ace-style" />

    <!-- Conditional Stylesheets for IE9 and below -->
    <!--[if lte IE 9]>
    <link rel="stylesheet" th:href="@{/assets/css/ace-part2.min.css}" class="ace-main-stylesheet" />
    <![endif]-->

    <!--[if lte IE 9]>
    <link rel="stylesheet" th:href="@{/assets/css/ace-ie.min.css}" />
    <![endif]-->

    <!-- ACE Settings Handler -->
    <script th:src="@{/admin/assets/js/ace-extra.min.js}"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->
    <!--[if lte IE 8]>
    <script th:src="@{/admin/assets/js/html5shiv.min.js}"></script>
    <script th:src="@{/admin/assets/js/respond.min.js}"></script>
    <![endif]-->
    <style>
        body {
            font-family: 'PT Serif', 'Times New Roman', serif;
        }
        .custom-modal {
            width: 1000px; /* Adjust width */
            height: 90vh; /* Adjust height */
            max-width: 900px;
        }
        .alert-fixed {
            position: fixed;
            top: 10px;            /* Adjusted to have some margin from the top */
            right: 10px;          /* Aligns the alert to the right */
            width: 80%;           /* Adjusted width */
            max-width: 400px;      /* Optional: limits the width of the alert */
            height: 60px;          /* Set a custom height */
            z-index: 1050;
            font-weight: bold;     /* Makes the font bold */
            display: flex;
            align-items: center;   /* Vertically center the content */
            padding-left: 20px;    /* Padding inside the alert box */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Adds a shadow for better aesthetics */
            background-color: #dff0d8; /* Success alert background */
            color: #3c763d;       /* Success alert text color */
            border-radius: 5px;    /* Rounded corners */
        }

        .alert-fixed .close-btn {
            margin-left: auto;     /* Pushes the close button to the far right */
            padding: 0 15px;
            font-size: 20px;
            cursor: pointer;
        }
    </style>
</head>

<div class="alert alert-fixed" role="alert" id="postResultDiv" th:style="'display: ' + (${alertMessage != null} ? 'block' : 'none') + ';'">
    <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">
        <use xlink:href="#check-circle-fill"></use>
    </svg>
    <div id="alertMessage" th:text="${alertMessage}"></div>
    <span class="close-btn" onclick="$('#postResultDiv').fadeOut();">&times;</span>
</div>
<body class="no-skin">
<div id="navbar" class="navbar navbar-default">
    <script type="text/javascript">
        try{ace.settings.check('navbar' , 'fixed')}catch(e){}
    </script>

    <div class="navbar-container" id="navbar-container">
        <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
            <span class="sr-only">Toggle sidebar</span>

            <span class="icon-bar"></span>

            <span class="icon-bar"></span>

            <span class="icon-bar"></span>
        </button>

        <div class="navbar-header pull-left">
            <a href="index.html" class="navbar-brand">
                <small>
                    <i class="fa fa-leaf"></i>
                    Hospital Management
                </small>
            </a>
        </div>

        <div class="navbar-buttons navbar-header pull-right" role="navigation">
            <ul class="nav ace-nav">


                <li class="light-blue">
                    <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                        <img class="nav-user-photo"
                             th:src="@{/admin/assets/avatars/user.jpg}"
                             alt="Jason's Photo" />
                        <span class="user-info">
									<small>Welcome,</small>
									Jason
								</span>

                        <i class="ace-icon fa fa-caret-down"></i>
                    </a>


                    <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                        <li>
                            <a href="#">
                                <i class="ace-icon fa fa-cog"></i>
                                Settings
                            </a>
                        </li>

                        <li>
                            <a href="profile.html">
                                <i class="ace-icon fa fa-user"></i>
                                Profile
                            </a>
                        </li>

                        <li class="divider"></li>

                        <li>
                            <a href="#">
                                <i class="ace-icon fa fa-power-off"></i>
                                Logout
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </div><!-- /.navbar-container -->
</div>

<div class="main-container" id="main-container">
    <script type="text/javascript">
        try{ace.settings.check('main-container' , 'fixed')}catch(e){}
    </script>

    <div id="sidebar" class="sidebar                  responsive">
        <script type="text/javascript">
            try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
        </script>


        <!-- /.sidebar-shortcuts -->

        <ul class="nav nav-list">
            <li class="active">
                <a href="patient.html">
                    <i class="menu-icon fa fa-tachometer"></i>
                    <span class="menu-text"> Patient </span>
                </a>

                <b class="arrow"></b>
            </li>

        </ul><!-- /.nav-list -->

        <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
            <i class="ace-icon fa fa-angle-double-left" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
        </div>

        <script type="text/javascript">
            try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
        </script>
    </div>

    <div class="main-content">
        <div class="main-content-inner">
            <div class="breadcrumbs" id="breadcrumbs">
                <script type="text/javascript">
                    try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
                </script>

                <ul class="breadcrumb">

                    <li class="active">Management</li>
                </ul><!-- /.breadcrumb -->

                <div class="nav-search" id="nav-search">
                    <form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="ace-icon fa fa-search nav-search-icon"></i>
								</span>
                    </form>
                </div><!-- /.nav-search -->
            </div>

            <div class="page-content">
                <div class="ace-settings-container" >
                    <button class="btn btn-xs btn-success mr-5" title="AddPatient" onclick="addPatient();">
                        <i class="ace-icon fa fa-plus bigger-160"></i>
                        <span>Thêm mới</span>
                    </button>

                    <!-- /.ace-settings-box -->
                </div><!-- /.ace-settings-container -->


                <div class="page-header">
                    <h1>
                        Patient
                        <small>
                            <i class="ace-icon fa fa-angle-double-right"></i>
                            overview &amp;
                        </small>
                    </h1>


                </div><!-- /.page-header -->
                <!-- filter -->

                <!-- LISTPATIENT			 -->

                <div class="row">
                    <div class="col-xs-12">
                        <!--  table area -->
                        <div class="row">
                            <div class="col-xs-12">
                                <table id="myTable" class="table table-striped table-bordered table-hover">
<!--                                    <div id="dynamic-table_wrapper" class="dataTables_wrapper form-inline no-footer"><div class="row"><div class="col-xs-6"><div class="dataTables_length" id="dynamic-table_length"><label>Display <select name="dynamic-table_length" aria-controls="dynamic-table" class="form-control input-sm" jf-ext-cache-id="28"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> records</label></div></div><div class="col-xs-6"><div id="dynamic-table_filter" class="dataTables_filter"><label>Search:<input type="search" class="form-control input-sm" placeholder="" aria-controls="dynamic-table" jf-ext-cache-id="15"></label></div></div></div><table id="dynamic-table" class="table table-striped table-bordered table-hover dataTable no-footer DTTT_selectable" role="grid" aria-describedby="dynamic-table_info">-->

                                    <thead>
                                    <tr>
                                        <th style="width: 70px;text-align: center;">STT</th>
                                        <th style="width: 60px;text-align: center;">Xử Lý</th>
                                        <th style="width: 160px;text-align: center;">Họ và tên</th>
                                        <th style="width: 80px;text-align: center;">Giới tính</th>
                                        <th style="width: 90px;text-align: center;" class="hidden-480">Ngày sinh</th>
                                        <th style="width: 180px;text-align: center;">Địa chỉ</th>
                                        <th style="width: 120px;text-align: center;">Phường xã</th>
                                        <th style="width: 110px;text-align: center;">Quận huyện</th>
                                        <th style="width: 110px;text-align: center;">Tỉnh thành phố</th>

                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!-- Iterate over the patients list -->
                                    <tr th:each="patient, iterStat : ${patients}">
                                        <td th:text="${iterStat.count}" style="text-align: center;"></td><!-- Row number -->
                                        <td>
                                            <div class="btn-group">

                                                <button data-toggle="dropdown" class="btn btn-sm btn-primary dropdown-toggle" jf-ext-button-ct="danger" aria-expanded="false">
                                                    <i class="ace-icon fa fa-cog "></i>

                                                    <i class="ace-icon fa fa-angle-down icon-on-right"></i>
                                                </button>

                                                <ul class="dropdown-menu dropdown-primary">
                                                    <li>
                                                        <a  href="#">
                                                            <i class="ace-icon fa fa-search-plus "></i>
                                                            Xem
                                                        </a>


                                                    </li>

                                                    <li>
                                                        <a th:href="@{/edit/{id}(id=${patient.ID})}">
                                                            <i class="ace-icon fa fa-pencil "></i>
                                                            Chỉnh sửa
                                                        </a>


                                                    </li>
                                                    <li>
                                                        <a th:href="@{/examination/{id}(id=${patient.ID})}">
                                                            <i class="ace-icon fa fa-bars"></i>
                                                            Đăng kí khám bệnh
                                                        </a>
                                                    </li>

                                                    <li>
                                                        <a  th:href="@{/admission/{id}(id=${patient.ID})}">
                                                            <i class="ace-icon fa fa-search "></i>
                                                            Đăng kí nhập viện
                                                        </a>


                                                    </li>

                                                    <li>
                                                        <a href="#">
                                                            <i class="ace-icon fa fa-trash-o "></i>
                                                            Xóa
                                                        </a>
                                                    </li>


                                                </ul>
                                            </div>
                                            <!--                                            <div class="hidden-sm hidden-xs btn-group">-->
                                            <!--                                                <button class="btn btn-xs btn-success" title="Giao tòa nhà"-->
                                            <!--                                                        th:onclick="'assignmentBuilding(' + ${patient.ID} + ')'">-->
                                            <!--                                                    <i class="ace-icon fa fa-check bigger-120"></i>-->
                                            <!--                                                </button>-->
                                            <!--                                                <button class="btn btn-xs btn-info">-->
                                            <!--                                                    <i class="ace-icon fa fa-pencil bigger-120"></i>-->
                                            <!--                                                </button>-->
                                            <!--                                                <button class="btn btn-xs btn-danger">-->
                                            <!--                                                    <i class="ace-icon fa fa-trash-o bigger-120"></i>-->
                                            <!--                                                </button>-->
                                            <!--                                                <button class="btn btn-xs btn-warning">-->
                                            <!--                                                    <i class="ace-icon fa fa-flag bigger-120"></i>-->
                                            <!--                                                </button>-->
                                            <!--                                            </div>-->
                                            <!--                                            <div class="hidden-md hidden-lg">-->
                                            <!--                                                <div class="inline pos-rel">-->
                                            <!--                                                    <button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown" data-position="auto">-->
                                            <!--                                                        <i class="ace-icon fa fa-cog icon-only bigger-110"></i>-->
                                            <!--                                                    </button>-->
                                            <!--                                                    <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">-->
                                            <!--                                                        <li>-->
                                            <!--                                                            <a href="#" class="tooltip-info" data-rel="tooltip" title="View">-->
                                            <!--                                            <span class="blue">-->
                                            <!--                                                <i class="ace-icon fa fa-search-plus bigger-120"></i>-->
                                            <!--                                            </span>-->
                                            <!--                                                            </a>-->
                                            <!--                                                        </li>-->
                                            <!--                                                        <li>-->
                                            <!--                                                            <a href="#" class="tooltip-success" data-rel="tooltip" title="Edit">-->
                                            <!--                                            <span class="green">-->
                                            <!--                                                <i class="ace-icon fa fa-pencil-square-o bigger-120"></i>-->
                                            <!--                                            </span>-->
                                            <!--                                                            </a>-->
                                            <!--                                                        </li>-->
                                            <!--                                                        <li>-->
                                            <!--                                                            <a href="#" class="tooltip-error" data-rel="tooltip" title="Delete">-->
                                            <!--                                            <span class="red">-->
                                            <!--                                                <i class="ace-icon fa fa-trash-o bigger-120"></i>-->
                                            <!--                                            </span>-->
                                            <!--                                                            </a>-->
                                            <!--                                                        </li>-->
                                            <!--                                                    </ul>-->
                                            <!--                                                </div>-->
                                            <!--                                            </div>-->
                                        </td>
                                        <td th:text="${patient.firstName + ' ' + patient.lastName}" style="padding: 10px;"></td> <!-- Patient name -->
                                        <td th:text="${patient.gender}"></td> <!-- Patient gender -->
                                        <td style="text-align: center;" class="hidden-480" th:text="${#dates.format(patient.dateOfBirth, 'dd-MM-yyyy')}"></td> <!-- Birth date formatted -->
                                        <td th:text="${patient.street}"></td> <!-- Address -->
                                        <td th:text="${patient.ward?.WardName}"></td> <!-- Ward -->
                                        <td th:text="${patient.district?.DistrictName}"></td> <!-- District -->
                                        <td th:text="${patient.city?.CityName}"></td>
                                    </tr>
                                    </tbody>
                                </table>
                                        <br>

<!--                                <div class="row"><div class="col-xs-6"><div class="dataTables_info" id="dynamic-table_info" role="status" aria-live="polite">Showing 1 to 10 of 23 entries</div></div><div class="col-xs-6"><div class="dataTables_paginate paging_simple_numbers" id="dynamic-table_paginate"><ul class="pagination"><li class="paginate_button previous disabled" aria-controls="dynamic-table" tabindex="0" id="dynamic-table_previous"><a href="#">Previous</a></li><li class="paginate_button active" aria-controls="dynamic-table" tabindex="0"><a href="#">1</a></li><li class="paginate_button " aria-controls="dynamic-table" tabindex="0"><a href="#">2</a></li><li class="paginate_button " aria-controls="dynamic-table" tabindex="0"><a href="#">3</a></li><li class="paginate_button next" aria-controls="dynamic-table" tabindex="0" id="dynamic-table_next"><a href="#">Next</a></li></ul></div></div></div></div>-->


                            </div>
                        </div>



                        <div class="hr hr-18 dotted hr-double"></div>

                        <!--hết-->





                        <div class="footer">
                            <div class="footer-inner">
                                <div class="footer-content">



                                </div>
                            </div>
                        </div>

                        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
                            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
                        </a>
                    </div>
                    <!-- LISTPATIENT			 -->

                    <!-- formAddPatient -->
                    <div class="modal fade" id="addPatient">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title">Thêm mới</h4>
                                    <button type="button" class="close" data-dismiss="modal">×</button>
                                </div>

                                <!-- Modal Body -->
                                <div class="modal-body">
                                    <form class="form-horizontal" role="form" id="patient-info-form">
                                        <!-- First Name -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="firstName">First Name</label>
                                            <div class="col-sm-9">
                                                <input type="text" id="firstName" name="firstName" placeholder="First name" class="form-control" value="" required>
                                            </div>
                                        </div>

                                        <!-- Last Name -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="lastName">Last Name</label>
                                            <div class="col-sm-9">
                                                <input type="text" id="lastName" name="lastName" placeholder="Last name" class="form-control" value="" required>
                                            </div>
                                        </div>

                                        <!-- Date of Birth -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="dob">Date of Birth</label>
                                            <div class="col-sm-9">
                                                <input type="date" id="dob" name="dob" class="form-control" value="" required>
                                            </div>
                                        </div>

                                        <!-- Gender -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right">Gender</label>
                                            <div class="col-sm-9">
                                                <label class="radio-inline">
                                                    <input type="radio" name="gender" value="Nam" checked> Nam
                                                </label>
                                                <label class="radio-inline">
                                                    <input type="radio" name="gender" value="Nữ"> Nữ
                                                </label>
                                            </div>
                                        </div>

                                        <!-- Street Address -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="street">Street</label>
                                            <div class="col-sm-9">
                                                <input type="text" id="street" name="street" placeholder="Street address" class="form-control" value="" required>
                                            </div>
                                        </div>

                                        <!-- City ID -->
                                        <!-- City Dropdown -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="cityId">City</label>
                                            <div class="col-sm-9">
                                                <select name="cityId" id="cityId" class="form-control" required onchange="loadDistricts(this.value)">
                                                    <option value="" disabled selected>Select a city</option>
                                                    <option th:each="city : ${cities}" th:value="${city.cityId}" th:text="${city.cityName}"></option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- District Dropdown -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="districtId">District</label>
                                            <div class="col-sm-9">
                                                <select name="districtId" id="districtId" class="form-control" required onchange="loadWards(this.value)">
                                                    <option value="" disabled selected>Select a district</option>
                                                    <!-- Districts will be populated here -->
                                                </select>
                                            </div>
                                        </div>
                                        <!-- Ward Dropdown -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="wardId">Ward</label>
                                            <div class="col-sm-9">
                                                <select name="wardId" id="wardId" class="form-control" required>
                                                    <option value="" disabled selected>Select a ward</option>
                                                    <!-- Wards will be populated here -->
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Phone Number -->
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label no-padding-right" for="phoneNumber">Phone Number</label>
                                            <div class="col-sm-9">
                                                <input type="text" id="phoneNumber" name="phoneNumber" placeholder="Phone number" class="form-control" value="" required>
                                            </div>
                                        </div>

                                        <!-- Form Actions -->
                                        <div class="clearfix form-actions">
                                            <div class="col-md-offset-3 col-md-9">
                                                <button class="btn btn-info" type="submit" id="btnSubmit">
                                                    <i class="ace-icon fa fa-check bigger-110"></i> Submit
                                                </button>
                                                &nbsp; &nbsp; &nbsp;
                                                <button class="btn btn-default" type="reset" id="btnReset">
                                                    <i class="ace-icon fa fa-undo bigger-110"></i> Reset
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>

                                <!-- Modal Footer -->
                                <!-- Uncomment if needed
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>
                                -->
                            </div>
                        </div>
                    </div>

                    <!-- formAddPatient -->


                    <!-- The Modal  xử lý sau -->
                    <div class="modal fade" id="assignmentBuildingModal">
                        <div class="modal-dialog">
                            <div class="modal-content">

                                <!-- Modal Header -->
                                <div class="modal-header">
                                    <h4 class="modal-title">Modal Heading</h4>
                                    <button type="button" class="close" data-dismiss="modal">×</button>
                                </div>

                                <!-- Modal body -->
                                <div class="modal-body">
<!--                                    <table id="simple-table" class="table table-striped table-bordered table-hover">-->
<!--                                        <thead>-->
<!--                                        <tr>-->
<!--                                            <th class="center">-->
<!--                                                <label class="pos-rel">-->
<!--                                                    <input type="checkbox" class="ace" jf-ext-cache-id="9">-->
<!--                                                    <span class="lbl"></span>-->
<!--                                                </label>-->
<!--                                            </th>-->
<!--                                            <th>Domain</th>-->
<!--                                            <th>Price</th>-->
<!--                                            <th class="hidden-480">Clicks</th>-->

<!--                                            <th>-->
<!--                                                <i class="ace-icon fa fa-clock-o bigger-110 hidden-480"></i>-->
<!--                                                Update-->
<!--                                            </th>-->
<!--                                            <th class="hidden-480">Status</th>-->

<!--                                            <th></th>-->
<!--                                        </tr>-->
<!--                                        </thead>-->

<!--                                        <tbody>-->
<!--                                        <tr>-->
<!--                                            <td class="center">-->

<!--                                                <input type="checkbox" class="ace" jf-ext-cache-id="10">-->


<!--                                            </td>-->

<!--                                            <td>-->
<!--                                                <a href="#">ace.com</a>-->
<!--                                            </td>-->
<!--                                            <td>$45</td>-->
<!--                                            <td class="hidden-480">3,330</td>-->
<!--                                            <td>Feb 12</td>-->

<!--                                            <td class="hidden-480">-->
<!--                                                <span class="label label-sm label-warning">Expiring</span>-->
<!--                                            </td>-->

<!--                                            <td>-->
<!--                                                <div class="hidden-sm hidden-xs btn-group">-->
<!--                                                    <button class="btn btn-xs btn-success">-->
<!--                                                        <i class="ace-icon fa fa-check bigger-120"></i>-->
<!--                                                    </button>-->

<!--                                                    <button class="btn btn-xs btn-info">-->
<!--                                                        <i class="ace-icon fa fa-pencil bigger-120"></i>-->
<!--                                                    </button>-->

<!--                                                    <button class="btn btn-xs btn-danger">-->
<!--                                                        <i class="ace-icon fa fa-trash-o bigger-120"></i>-->
<!--                                                    </button>-->

<!--                                                    <button class="btn btn-xs btn-warning">-->
<!--                                                        <i class="ace-icon fa fa-flag bigger-120"></i>-->
<!--                                                    </button>-->
<!--                                                </div>-->

<!--                                                <div class="hidden-md hidden-lg">-->
<!--                                                    <div class="inline pos-rel">-->
<!--                                                        <button class="btn btn-minier btn-primary dropdown-toggle" data-toggle="dropdown" data-position="auto">-->
<!--                                                            <i class="ace-icon fa fa-cog icon-only bigger-110"></i>-->
<!--                                                        </button>-->

<!--                                                        <ul class="dropdown-menu dropdown-only-icon dropdown-yellow dropdown-menu-right dropdown-caret dropdown-close">-->
<!--                                                            <li>-->
<!--                                                                <a href="#" class="tooltip-info" data-rel="tooltip" title="" data-original-title="View">-->
<!--												<span class="blue">-->
<!--													<i class="ace-icon fa fa-search-plus bigger-120"></i>-->
<!--												</span>-->
<!--                                                                </a>-->
<!--                                                            </li>-->

<!--                                                            <li>-->
<!--                                                                <a href="#" class="tooltip-success" data-rel="tooltip" title="" data-original-title="Edit">-->
<!--												<span class="green">-->
<!--													<i class="ace-icon fa fa-pencil-square-o bigger-120"></i>-->
<!--												</span>-->
<!--                                                                </a>-->
<!--                                                            </li>-->

<!--                                                            <li>-->
<!--                                                                <a href="#" class="tooltip-error" data-rel="tooltip" title="" data-original-title="Delete">-->
<!--												<span class="red">-->
<!--													<i class="ace-icon fa fa-trash-o bigger-120"></i>-->
<!--												</span>-->
<!--                                                                </a>-->
<!--                                                            </li>-->
<!--                                                        </ul>-->
<!--                                                    </div>-->
<!--                                                </div>-->
<!--                                            </td>-->
<!--                                        </tr>-->






<!--                                        </tbody>-->
<!--                                    </table>-->
                                </div>

                                <!-- Modal footer -->
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<!--[if !IE]> -->
<script th:src="@{/admin/assets/js/jquery.2.1.1.min.js}"></script>

<script>
    function loadDistricts(cityId) {
        // Clear existing options
        const districtSelect = document.getElementById('districtId');
        districtSelect.innerHTML = '<option value="" disabled selected>Select a district</option>';

        // Fetch districts
        fetch(`/districts/${cityId}`)
            .then(response => response.json())
            .then(districts => {
                districts.forEach(district => {
                    const option = document.createElement('option');
                    option.value = district.districtId; // Adjust this if your field name is different
                    option.textContent = district.districtName; // Adjust to your attribute
                    districtSelect.appendChild(option);
                });
            })
            .catch(error => {
                console.error('Error fetching districts:', error);
            });
    }

    function loadWards(districtId) {
        // Clear existing options
        const wardSelect = document.getElementById('wardId');
        wardSelect.innerHTML = '<option value="" disabled selected>Select a ward</option>';

        // Fetch wards
        fetch(`/wards/${districtId}`)
            .then(response => response.json())
            .then(wards => {
                wards.forEach(ward => {
                    const option = document.createElement('option');
                    option.value = ward.wardId; // Adjust this if your field name is different
                    option.textContent = ward.wardName; // Adjust to your attribute
                    wardSelect.appendChild(option);
                });
            })
            .catch(error => {
                console.error('Error fetching wards:', error);
            });
    }
</script>
<script>

    function addNewRow() {
        var newRow = '<tr>' +
            '<td>' +
            '<select class="chosen-select form-control" id="form-field-select-3" data-placeholder="Choose a State...">' +
            '<option value="">  </option>' +
            '<option value="AL">Alabama</option>' +
            '<option value="CA">California</option>' +
            '<option value="NY">New York</option>' +
            '</select>' +
            '</td>' +
            '<td><input type="text" class="form-control" name="dosage"></td>' +
            '<td><input type="text" class="form-control" name="frequency"></td>' +
            '<td><button type="button" class="btn btn-danger remove-row">Remove</button></td>' +
            '</tr>';
        $('#medicationBody').append(newRow);  // Append the new row to the tbody
    }

    // Add new row to the table when the button is clicked

    // Remove row from the table
    $(document).on('click', '.remove-row', function() {
        $(this).closest('tr').remove();  // Remove the specific row
        calculateTotal(); // Recalculate total after removing a row
    });


    // Function to calculate total price of medications + examination fee
    function calculateTotal() {
        var total = 0;

        // Iterate through each row in the medication table
        $('#medicationBody tr').each(function() {
            var price = $(this).find('input[name="price"]').val();
            var quantity = $(this).find('input[name="quantity"]').val();

            // Calculate the subtotal for each medication
            if (price && quantity) {
                total += price * quantity;
            }
        });

        // Add examination fee to total
        var examinationFee = parseFloat($('#examinationFee').val()) || 0;
        total += examinationFee;

        // Set the total fee field
        $('#totalFee').val(total.toFixed(2));
    }
    // Handle form submission
    $('#examination-info-form').submit(function(e) {
        e.preventDefault();  // Prevent form from refreshing the page

        // Gather form data
        var formData = {
            doctorId: $('#doctorId').val(),
            examinationDate: $('#examinationDate').val(),
            diagnosis: $('#diagnosis').val(),
            medications: []
        };

        // Gather table data
        $('#medicationTable tbody tr').each(function() {
            var medication = {
                medicationName: $(this).find('input[name="medicationName"]').val(),
                dosage: $(this).find('input[name="dosage"]').val(),
                frequency: $(this).find('input[name="frequency"]').val()
            };
            formData.medications.push(medication);
        });

        // Send data to the backend via AJAX
        $.ajax({
            url: '/api/examinations',  // The URL of the API to handle form submission
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify(formData),
            success: function(response) {
                alert('Examination saved successfully!');
                // Reset the form after successful submission
                $('#examination-info-form')[0].reset();
                $('#medicationBody').html('');  // Clear the table
            },
            error: function(error) {
                console.error('Error saving the examination:', error);
            }
        });
    });

</script>

<script>
    $('#btnSubmit').click(function(event) {
        event.preventDefault();
        var data = {};
        var formData = $('#patient-info-form').serializeArray();

        $.each(formData, function() {
            data[this.name] = this.value; // Convert array to object
        });

        // Log form data for debugging
        console.log("Form Data:", data);

        // Perform AJAX request to the API
        $.ajax({
            type: "POST",
            url: "patient/add", // Make sure the URL matches the endpoint
            data: JSON.stringify(data),
            contentType: "application/json", // Important to specify JSON content
            dataType: 'json', // Expect JSON response
            success: function(response) {
                console.log("Success:", response);
                $('#postResultDiv').removeClass('alert-danger').addClass('alert-success'); // Set to success alert
                $('#alertMessage').text(response.message); // Update the alert message
                $('#addPatient').modal('hide');
                $('#postResultDiv').show().addClass('alert-fixed');
                // Reload the table content
                $('#myTable').load(location.href + ' #myTable', function() {
                    console.log("Table reloaded successfully");
                });

                setTimeout(function() {
                    $('#postResultDiv').fadeOut();
                }, 5000);

                // Reset the form
                $('#patient-info-form')[0].reset();

            },
            error: function(xhr, status, error) {
                console.log("Failed:", status, error);
                $('#postResultDiv').removeClass('alert-success').addClass('alert-danger'); // Set to danger alert
                $('#alertMessage').text("Failed to add patient. Please check the console for more details."); // Update the alert message
                $('#postResultDiv').show().addClass('alert-fixed');
                setTimeout(function() {
                    $('#postResultDiv').fadeOut(); // Fade out the alert
                }, 5000);

            }
        });
    });
</script>

<script>
    function assignmentBuilding(){
        $('#assignmentBuildingModal').modal();
    }
</script>
<script>
    function addPatient() {
        $('#addPatient').modal();
    }



        function addExamination(){
        $('#addExamination').modal();
    }

</script>


<!--[if IE]>
<script th:src="@{/admin/assets/js/jquery.1.11.1.min.js}"></script>
<![endif]-->

<!--[if !IE]> -->
<script type="text/javascript" th:src="@{/admin/assets/js/jquery.min.js}"></script>
<!-- <![endif]-->

<!--[if IE]>
<script type="text/javascript">
    window.jQuery || document.write("<script th:src='@{/assets/js/jquery1x.min.js}'><"+"/script>");
</script>
<![endif]-->
<script type="text/javascript">
    if('ontouchstart' in document.documentElement) document.write("<script th:src='@{/assets/js/jquery.mobile.custom.min.js}'><"+"/script>");
</script>
<script th:src="@{/admin/assets/js/bootstrap.min.js}"></script>

<!-- Page specific plugin scripts -->

<!--[if lte IE 8]>
<script th:src="@{/assets/js/excanvas.min.js}"></script>
<![endif]-->
<!--                    <script th:src="@{/assets/js/jquery-ui.custom.min.js}"></script>-->
<!--                    <script th:src="@{/assets/js/jquery.ui.touch-punch.min.js}"></script>-->
<!--                    <script th:src="@{/assets/js/jquery.easypiechart.min.js}"></script>-->
<!--                    <script th:src="@{/assets/js/jquery.sparkline.min.js}"></script>-->
<!--                    <script th:src="@{/assets/js/jquery.flot.min.js}"></script>-->
<!--                    <script th:src="@{/assets/js/jquery.flot.pie.min.js}"></script>-->
<!--                    <script th:src="@{/assets/js/jquery.flot.resize.min.js}"></script>-->

<!-- Ace scripts -->
<!--                    <script th:src="@{/assets/js/ace-elements.min.js}"></script>-->
<!--                    <script th:src="@{/assets/js/ace.min.js}"></script>-->

</body>
</html>
